<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Website Vision Quiz - Exotech Developers</title>
    <meta name="description" content="Take our quick quiz to find the best web development solution tailored for your business needs.">
    <meta name="robots" content="noindex, nofollow"> <!-- Noindex/nofollow for quiz, as content might be dynamic -->

    <!-- Google Fonts: Poppins and Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;560;700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <style>
        /* Custom styles for quiz.html to align with website theme */
        body {
            font-family: var(--font-secondary);
            background-color: var(--color-light-gray); /* Use theme light gray */
            color: var(--color-soft-black);
            display: flex;
            flex-direction: column; /* Allow header/footer to stack */
            min-height: 100vh;
            overflow-x: hidden;
        }

        main {
            flex-grow: 1; /* Allow main content to take available space */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: var(--spacing-lg); /* Add some padding around the quiz container */
        }

        .quiz-container {
            background-color: var(--color-white);
            padding: var(--spacing-xl);
            border-radius: var(--border-radius);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            width: 100%;
            max-width: 900px; /* Increased max-width for better layout */
            transform: translateY(0); /* Reset transform */
            transition: all 0.5s ease-in-out;
            margin: var(--spacing-lg) 0; /* Add margin top/bottom */
        }

        .quiz-container.hidden {
            opacity: 0;
            transform: translateY(20px);
        }

        .quiz-logo {
            display: flex;
            justify-content: center;
            margin-bottom: var(--spacing-lg);
        }

        .quiz-logo img {
            height: 60px; /* Adjusted logo size */
            object-fit: contain;
        }

        .quiz-title {
            font-family: var(--font-primary);
            font-size: 2.8rem; /* Larger title */
            font-weight: 700;
            text-align: center;
            color: var(--color-dark-blue-teal);
            margin-bottom: var(--spacing-md);
        }

        .quiz-introduction {
            text-align: center;
            color: var(--color-soft-black);
            margin-bottom: var(--spacing-xl);
            font-size: 1.1rem;
            line-height: 1.6;
        }

        /* Quiz Section Styling */
        .quiz-section-content {
            padding: var(--spacing-md);
        }

        .question-progress {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--color-electric-blue);
            margin-bottom: var(--spacing-sm);
            text-align: center;
        }

        .question-text {
            font-family: var(--font-primary);
            font-size: 1.7rem;
            font-weight: 600;
            color: var(--color-dark-blue-teal);
            margin-bottom: var(--spacing-lg);
            text-align: center;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
        }

        .quiz-option-label { /* Renamed from .quiz-option label for clarity */
            display: flex;
            align-items: center;
            padding: var(--spacing-md);
            background-color: var(--color-light-gray);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            font-size: 1rem;
            color: var(--color-dark-text);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .quiz-option-label:hover {
            background-color: #e2e8f0; /* Lighter hover */
            border-color: var(--color-electric-blue);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .quiz-radio-input { /* Renamed from .quiz-option input[type="radio"] */
            margin-right: var(--spacing-md);
            accent-color: var(--color-electric-blue);
            transform: scale(1.2); /* Slightly larger radio button */
        }

        .quiz-radio-input:checked + .quiz-option-text { /* Updated selector */
            color: var(--color-dark-blue-teal);
            font-weight: 600;
        }

        .quiz-radio-input:checked + .quiz-option-text::before { /* Updated selector */
            content: '\f058'; /* Font Awesome check-circle */
            font-family: 'Font Awesome 5 Free';
            font-weight: 900;
            color: var(--color-electric-blue);
            margin-right: var(--spacing-xs);
        }


        .quiz-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: var(--spacing-xl);
            gap: var(--spacing-md);
        }

        .quiz-navigation .btn {
            flex: 1;
        }

        /* Solution Section Styling */
        .solution-section {
            background-color: var(--color-dark-blue-teal); /* Darker background for results */
            color: var(--color-white);
            padding: var(--spacing-xl);
            border-radius: var(--border-radius);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
            text-align: center;
            animation: fadeIn 1s ease-out forwards;
        }

        .solution-section h2 {
            font-family: var(--font-primary);
            color: var(--color-electric-blue); /* Highlighted heading */
            font-size: 2.5rem;
            margin-bottom: var(--spacing-md);
        }

        .solution-section p {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: var(--spacing-lg);
        }

        .solution-content-box {
            background-color: rgba(255, 255, 255, 0.1); /* Semi-transparent white background */
            padding: var(--spacing-lg);
            border-radius: var(--border-radius);
            text-align: left;
            margin-bottom: var(--spacing-xl);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .solution-content-box .solution-list { /* Added class for list */
            list-style: none; /* Remove default bullet points */
            padding-left: 0;
            margin-bottom: 0;
        }

        .solution-content-box .solution-list li { /* Added class for list item */
            position: relative;
            padding-left: var(--spacing-lg); /* Space for custom icon */
            margin-bottom: var(--spacing-sm);
            font-size: 1rem;
            color: var(--color-white);
        }

        .solution-content-box .solution-list li::before { /* Added class for list item */
            content: '\f00c'; /* Font Awesome check icon */
            font-family: 'Font Awesome 5 Free';
            font-weight: 900;
            color: var(--color-orange-accent); /* Vibrant checkmark color */
            position: absolute;
            left: 0;
            top: 2px;
        }

        .solution-content-box strong {
            color: var(--color-electric-blue); /* Highlight key terms */
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .quiz-container {
                padding: var(--spacing-lg);
            }
            .quiz-title {
                font-size: 2rem;
            }
            .question-text {
                font-size: 1.4rem;
            }
            .quiz-option-label { /* Updated class name */
                padding: var(--spacing-sm);
                font-size: 0.95rem;
            }
            .quiz-navigation {
                flex-direction: column;
            }
            .solution-section h2 {
                font-size: 2rem;
            }
        }

        /* Modal Styles (for contact form popup) */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background-color: var(--color-white);
            padding: var(--spacing-xl);
            border-radius: var(--border-radius);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 500px;
            position: relative;
            transform: translateY(-20px);
            transition: transform 0.3s ease;
            text-align: left;
        }

        .modal-overlay.active .modal-content {
            transform: translateY(0);
        }

        .modal-close-btn {
            position: absolute;
            top: var(--spacing-sm);
            right: var(--spacing-sm);
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--color-soft-black);
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .modal-close-btn:hover {
            color: var(--color-electric-blue);
        }

        .modal-content h3 {
            color: var(--color-dark-blue-teal);
            margin-bottom: var(--spacing-md);
            text-align: center;
        }

        .modal-form label {
            display: block;
            margin-bottom: var(--spacing-xs);
            font-weight: 500;
            color: var(--color-soft-black);
        }

        .modal-form input[type="text"],
        .modal-form input[type="email"],
        .modal-form input[type="tel"],
        .modal-form textarea {
            width: 100%;
            padding: var(--spacing-sm);
            margin-bottom: var(--spacing-md);
            border: 1px solid var(--color-light-gray);
            border-radius: var(--border-radius);
            font-family: var(--font-secondary);
            font-size: 1rem;
        }

        .modal-form textarea {
            resize: vertical;
            min-height: 80px;
        }

        .modal-form .btn {
            margin-top: var(--spacing-md);
        }

        .success-message {
            background-color: #d4edda; /* Light green */
            color: #155724; /* Dark green */
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
            margin-top: var(--spacing-md);
            text-align: center;
            display: none; /* Hidden by default */
        }
        .error-message {
            background-color: #f8d7da; /* Light red */
            color: #721c24; /* Dark red */
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
            margin-top: var(--spacing-md);
            text-align: center;
            display: none; /* Hidden by default */
        }
    </style>
</head>
<body>
    <!-- Header Section -->
    <header class="header">
        <div class="container header__container">
            <div class="header__logo">
                <a href="index.html">
                    <img src="exotechlogo.png" alt="Exotech Developers Logo" class="header__logo-image">
                </a>
            </div>
            <nav class="header__nav" id="main-nav">
                <ul class="header__nav-list">
                    <li><a href="index.html" class="header__nav-link">Home</a></li>
                    <li><a href="about.html" class="header__nav-link">About Us</a></li>
                    <li><a href="services.html" class="header__nav-link">Services</a></li>
                    <li><a href="pricing.html" class="header__nav-link">Pricing</a></li>
                    <li><a href="contact.html" class="header__nav-link">Contact</a></li>
                </ul>
            </nav>
            <button class="header__hamburger" id="hamburger-menu" aria-label="Toggle navigation">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </header>

    <main>
        <section class="hero-section hero-section--small">
            <div class="container hero-section__container">
                <h1 class="hero-section__heading">Find Your Perfect Web Solution!</h1>
                <p class="hero-section__subheading">
                    Answer a few quick questions to help us understand your needs and recommend the best plan.
                </p>
            </div>
        </section>

        <section class="quiz-section">
            <div class="quiz-container" id="quiz-container-main">
                <div class="quiz-logo">
                    <img src="exotechlogo.png" alt="Exotech Logo">
                </div>
                <h1 class="quiz-title">Your Website Vision Quiz!</h1>
                <p id="introduction" class="quiz-introduction">
                    Let's discover the perfect website solution for you! Answer these 10 quick questions to help us understand your needs and dreams.
                </p>

                <!-- Quiz Section -->
                <div id="quiz-section" class="hidden">
                    <div class="mb-6">
                        <p class="question-progress">Question <span id="question-number">1</span> of 10</p>
                        <h2 id="question-text" class="question-text"></h2>
                        <div id="options-container" class="options-container">
                            <!-- Options will be dynamically loaded here -->
                        </div>
                    </div>

                    <div class="quiz-navigation">
                        <button id="prev-button" class="btn btn--secondary" style="display: none;">
                            Previous
                        </button>
                        <button id="next-button" class="btn btn--primary ml-auto">
                            Next
                        </button>
                        <button id="submit-button" class="btn btn--primary ml-auto" style="display: none;">
                            Get My Solution!
                        </button>
                    </div>
                </div>

                <!-- Solution Section -->
                <div id="solution-section" class="hidden solution-section">
                    <h2>Your Personalized Website Solution!</h2>
                    <p>Based on your answers, here's a comprehensive overview of what your ideal website might look like:</p>
                    <div id="solution-content" class="solution-content-box">
                        <!-- Solution details will be dynamically loaded here -->
                    </div>
                    <!-- Updated button to open modal -->
                    <button class="btn btn--white" id="openContactModalBtn">Contact Us for This Solution</button>
                    <button id="restart-button" class="btn btn--tertiary mt-4">
                        Take the Quiz Again
                    </button>
                </div>

                <!-- Start Quiz Button -->
                <button id="start-quiz-button" class="btn btn--primary w-full transform hover:scale-105">
                    Start the Quiz!
                </button>
            </div>
        </section>
    </main>

    <!-- Footer Section -->
    <footer class="footer">
        <div class="container footer__container">
            <div class="footer__contact-info">
                <h3>Contact Us</h3>
                <p><i class="fas fa-phone-alt"></i> <a href="tel:+919510553160">+91 95105 53160</a></p>
                <p><i class="fab fa-whatsapp"></i> <a href="https://wa.me/919510553160" target="_blank">WhatsApp Us</a></p>
                <p><i class="fas fa-envelope"></i> <a href="mailto:info@exotech.co.in">info@exotech.co.in</a></p>
                <p><i class="fas fa-map-marker-alt"></i> 603, Exotech Office, Surat, Gujarat, India</p>
            </div>
            <div class="footer__social-media">
                <h3>Connect With Us</h3>
                <div class="social-icons">
                    <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                    <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                </div>
            </div>
            <div class="footer__qr-code">
                <h3>Scan to Connect</h3>
                <img src="https://placehold.co/120x120/1A324E/FFFFFF?text=QR+Code" alt="QR Code for Exotech Developers" class="footer__qr-image">
            </div>
        </div>
        <div class="footer__bottom">
            <div class="container">
                <p>&copy; 2025 EXOTECH Developers. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Contact Form Popup Modal -->
    <div class="modal-overlay" id="contactModalOverlay">
        <div class="modal-content">
            <button class="modal-close-btn" id="closeContactModalBtn">&times;</button>
            <h3>Get a Free Consultation!</h3>
            <form class="modal-form" id="quizContactForm" action="https://formspree.io/f/mqalddrg" method="POST">
                <label for="modalName">Name:</label>
                <input type="text" id="modalName" name="name" required>

                <label for="modalEmail">Email:</label>
                <input type="email" id="modalEmail" name="email" required>

                <label for="modalPhone">Phone:</label>
                <input type="tel" id="modalPhone" name="phone">

                <label for="modalMessage">Your Message / Quiz Recommendation:</label>
                <textarea id="modalMessage" name="message" rows="6" readonly></textarea>
                <!-- Hidden input to explicitly send the recommendation summary -->
                <input type="hidden" id="hiddenRecommendation" name="quiz_recommendation">

                <button type="submit" class="btn btn--primary">Send My Inquiry</button>
            </form>
            <div class="success-message" id="contactSuccessMessage">
                Thank you! Your inquiry has been sent. We'll be in touch shortly.
            </div>
            <div class="error-message" id="contactErrorMessage">
                There was an error submitting your request. Please try again later.
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Define the quiz questions and their options
        const questions = [
            {
                question: "What's the primary goal of your new website?",
                options: [
                    { text: "Sell products/services online (E-commerce)", tags: ["e-commerce", "sales-focused"] },
                    { text: "Generate leads/inquiries (Lead Generation)", tags: ["lead-gen", "contact-focused"] },
                    { text: "Provide information/showcase portfolio (Informational/Portfolio)", tags: ["informational", "portfolio"] },
                    { text: "Build a community/blog (Community/Content)", tags: ["community", "content-driven"] }
                ]
            },
            {
                question: "Who is your main target audience?",
                options: [
                    { text: "General public, broad appeal", tags: ["broad-audience"] },
                    { text: "Specific niche, B2B clients", tags: ["niche-audience", "b2b"] },
                    { text: "Local customers", tags: ["local-seo"] },
                    { text: "Global audience", tags: ["global-reach"] }
                ]
            },
            {
                question: "What's your current budget range for this project?",
                options: [
                    { text: "Under ₹10,000 (Basic)", tags: ["budget-basic"] },
                    { text: "₹10,000 - ₹25,000 (Standard)", tags: ["budget-standard"] },
                    { text: "₹25,000 - ₹50,000 (Advanced)", tags: ["budget-advanced"] },
                    { text: "₹50,000+ (Premium)", tags: ["budget-premium"] }
                ]
            },
            {
                question: "How important is mobile responsiveness to you?",
                options: [
                    { text: "Absolutely essential, must look perfect on all devices", tags: ["mobile-first", "responsive-critical"] },
                    { text: "Very important, most users are on mobile", tags: ["mobile-important"] },
                    { text: "Somewhat important, desktop is primary", tags: ["desktop-primary"] },
                    { text: "Not a major concern", tags: ["basic-responsiveness"] }
                ]
            },
            {
                question: "Do you need to sell products or services directly on your website?",
                options: [
                    { text: "Yes, full e-commerce functionality", tags: ["e-commerce", "payment-gateway"] },
                    { text: "Maybe, simple payment links", tags: ["basic-payments"] },
                    { text: "No, just showcase products", tags: ["no-e-commerce"] },
                    { text: "Not applicable", tags: ["no-e-commerce"] }
                ]
            },
            {
                question: "How often do you plan to update your website content?",
                options: [
                    { text: "Daily/Weekly (Blog, News)", tags: ["cms-heavy", "blog-needed"] },
                    { text: "Monthly/Quarterly (Updates, New Products)", tags: ["cms-moderate"] },
                    { text: "Annually/Infrequently (Static Info)", tags: ["static-content"] },
                    { text: "Never, once it's built", tags: ["static-content"] }
                ]
            },
            {
                question: "What kind of design aesthetic are you leaning towards?",
                options: [
                    { text: "Modern, minimalist, clean", tags: ["design-modern"] },
                    { text: "Bold, vibrant, unique", tags: ["design-bold"] },
                    { text: "Classic, traditional, professional", tags: ["design-classic"] },
                    { text: "Fun, quirky, illustrative", tags: ["design-fun"] }
                ]
            },
            {
                question: "Do you need advanced features like user accounts, forums, or custom calculators?",
                options: [
                    { text: "Yes, complex interactive features", tags: ["custom-development", "advanced-features"] },
                    { text: "Maybe, depends on the solution", tags: ["potential-features"] },
                    { text: "No, simple static pages are fine", tags: ["simple-structure"] },
                    { text: "Not sure yet", tags: ["flexible-scope"] }
                ]
            },
            {
                question: "How important is search engine optimization (SEO) to you?",
                options: [
                    { text: "Extremely important, want to rank high", tags: ["seo-critical", "marketing-focus"] },
                    { text: "Important, want basic visibility", tags: ["seo-important"] },
                    { text: "Somewhat important, word-of-mouth is key", tags: ["seo-moderate"] },
                    { text: "Not a priority", tags: ["seo-low"] }
                ]
            },
            {
                question: "What's your preferred timeline for launching the website?",
                options: [
                    { text: "ASAP (1-2 months)", tags: ["timeline-urgent"] },
                    { text: "Standard (2-4 months)", tags: ["timeline-standard"] },
                    { text: "Flexible (4-6 months)", tags: ["timeline-flexible"] },
                    { text: "No strict deadline", tags: ["timeline-open"] }
                ]
            }
        ];

        // Get references to HTML elements
        const quizContainerMain = document.getElementById('quiz-container-main');
        const introductionText = document.getElementById('introduction');
        const startQuizButton = document.getElementById('start-quiz-button');
        const quizSection = document.getElementById('quiz-section');
        const questionNumberSpan = document.getElementById('question-number');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const prevButton = document.getElementById('prev-button');
        const nextButton = document.getElementById('next-button');
        const submitButton = document.getElementById('submit-button');
        const solutionSection = document.getElementById('solution-section');
        const solutionContent = document.getElementById('solution-content');
        const restartButton = document.getElementById('restart-button');

        // Contact Modal elements
        const openContactModalBtn = document.getElementById('openContactModalBtn');
        const contactModalOverlay = document.getElementById('contactModalOverlay');
        const closeContactModalBtn = document.getElementById('closeContactModalBtn');
        const quizContactForm = document.getElementById('quizContactForm');
        const modalMessageTextarea = document.getElementById('modalMessage');
        const hiddenRecommendationInput = document.getElementById('hiddenRecommendation');
        const contactSuccessMessage = document.getElementById('contactSuccessMessage');
        const contactErrorMessage = document.getElementById('contactErrorMessage');


        let currentQuestionIndex = 0;
        let userAnswers = []; // Stores the selected option index for each question
        let currentRecommendationSummary = ""; // To store the generated recommendation text

        // Function to start the quiz
        function startQuiz() {
            introductionText.classList.add('hidden');
            startQuizButton.classList.add('hidden');
            quizSection.classList.remove('hidden');
            solutionSection.classList.add('hidden'); // Ensure solution is hidden
            currentQuestionIndex = 0;
            userAnswers = Array(questions.length).fill(null); // Initialize answers
            displayQuestion();
        }

        // Function to display the current question
        function displayQuestion() {
            const question = questions[currentQuestionIndex];
            questionNumberSpan.textContent = currentQuestionIndex + 1;
            questionText.textContent = question.question;
            optionsContainer.innerHTML = ''; // Clear previous options

            // Create radio buttons for each option
            question.options.forEach((option, index) => {
                const label = document.createElement('label');
                label.className = "quiz-option-label"; // Custom class for styling
                label.innerHTML = `
                    <input type="radio" name="question-${currentQuestionIndex}" value="${index}" class="quiz-radio-input">
                    <span class="quiz-option-text">${option.text}</span>
                `;
                optionsContainer.appendChild(label);

                // Pre-select if an answer was previously chosen for this question
                const radioInput = label.querySelector('input[type="radio"]');
                if (userAnswers[currentQuestionIndex] === index) {
                    radioInput.checked = true;
                }
            });

            // Update button visibility
            prevButton.classList.toggle('hidden', currentQuestionIndex === 0);
            nextButton.classList.toggle('hidden', currentQuestionIndex === questions.length - 1);
            submitButton.classList.toggle('hidden', currentQuestionIndex !== questions.length - 1);
        }

        // Function to handle moving to the next question
        function nextQuestion() {
            const selectedOption = document.querySelector(`input[name="question-${currentQuestionIndex}"]:checked`);
            if (selectedOption) {
                userAnswers[currentQuestionIndex] = parseInt(selectedOption.value);
                if (currentQuestionIndex < questions.length - 1) {
                    currentQuestionIndex++;
                    displayQuestion();
                } else {
                    // If it's the last question and an option is selected, submit the quiz
                    generateSolution();
                }
            } else {
                // Simple visual feedback for not selecting an option
                quizContainerMain.style.borderColor = 'red'; // Add a red border to the main container
                quizContainerMain.style.boxShadow = '0 0 15px rgba(255, 0, 0, 0.5)'; // Add a red glow
                setTimeout(() => {
                    quizContainerMain.style.borderColor = ''; // Remove border
                    quizContainerMain.style.boxShadow = ''; // Remove glow
                }, 1000);
            }
        }

        // Function to handle moving to the previous question
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        // Function to generate and display the solution
        function generateSolution() {
            quizSection.classList.add('hidden');
            solutionSection.classList.remove('hidden');

            const collectedTags = new Set();
            userAnswers.forEach((answerIndex, qIndex) => {
                if (answerIndex !== null) {
                    questions[qIndex].options[answerIndex].tags.forEach(tag => collectedTags.add(tag));
                }
            });

            let solutionHtml = '<ul class="solution-list">';
            let recommendationTextForForm = "Quiz Recommendation:\n";

            // Determine Core Website Type
            let websiteType = "Custom Web Solution";
            if (collectedTags.has("e-commerce")) {
                websiteType = "E-commerce Platform";
            } else if (collectedTags.has("lead-gen")) {
                websiteType = "Lead Generation Website";
            } else if (collectedTags.has("informational") || collectedTags.has("portfolio")) {
                websiteType = "Informational / Portfolio Website";
            } else if (collectedTags.has("community") || collectedTags.has("content-driven")) {
                websiteType = "Content-Driven Platform (Blog/Community)";
            }

            solutionHtml += `<li><i class="fas fa-globe"></i> <strong>Recommended Website Type:</strong> ${websiteType}</li>`;
            recommendationTextForForm += `- Recommended Website Type: ${websiteType}\n`;

            // Design & User Experience
            if (collectedTags.has("mobile-first") || collectedTags.has("responsive-critical") || collectedTags.has("mobile-important")) {
                solutionHtml += `<li><i class="fas fa-mobile-alt"></i> <strong>Mobile-First & Responsive Design:</strong> Your site will be designed to look and function flawlessly on all devices.</li>`;
                recommendationTextForForm += `- Mobile-First & Responsive Design\n`;
            } else {
                 solutionHtml += `<li><i class="fas fa-desktop"></i> <strong>Desktop-Optimized Design:</strong> While responsive, the primary focus will be on desktop experience.</li>`;
                 recommendationTextForForm += `- Desktop-Optimized Design\n`;
            }

            if (collectedTags.has("design-modern")) {
                solutionHtml += `<li><i class="fas fa-palette"></i> <strong>Design Aesthetic:</strong> Modern, minimalist, and clean visuals for a polished user experience.</li>`;
                recommendationTextForForm += `- Design Aesthetic: Modern, minimalist, clean\n`;
            } else if (collectedTags.has("design-bold")) {
                solutionHtml += `<li><i class="fas fa-paint-brush"></i> <strong>Design Aesthetic:</strong> Bold, vibrant, and unique visuals to make your brand stand out.</li>`;
                recommendationTextForForm += `- Design Aesthetic: Bold, vibrant, unique\n`;
            } else if (collectedTags.has("design-classic")) {
                solutionHtml += `<li><i class="fas fa-gem"></i> <strong>Design Aesthetic:</strong> Classic, traditional, and professional look for timeless appeal.</li>`;
                recommendationTextForForm += `- Design Aesthetic: Classic, traditional, professional\n`;
            } else if (collectedTags.has("design-fun")) {
                solutionHtml += `<li><i class="fas fa-grin-beam"></i> <strong>Design Aesthetic:</strong> Fun, quirky, and illustrative elements for an engaging interface.</li>`;
                recommendationTextForForm += `- Design Aesthetic: Fun, quirky, illustrative\n`;
            }

            // Technical & Marketing Aspects
            if (collectedTags.has("cms-heavy") || collectedTags.has("cms-moderate")) {
                solutionHtml += `<li><i class="fas fa-edit"></i> <strong>Content Management:</strong> Easy-to-use Content Management System (CMS) for regular updates.</li>`;
                recommendationTextForForm += `- Content Management: CMS for regular updates\n`;
            } else {
                 solutionHtml += `<li><i class="fas fa-file"></i> <strong>Content Management:</strong> Primarily static content, with developer assistance for updates.</li>`;
                 recommendationTextForForm += `- Content Management: Static content, developer updates\n`;
            }

            if (collectedTags.has("seo-critical")) {
                solutionHtml += `<li><i class="fas fa-chart-line"></i> <strong>SEO Strategy:</strong> Comprehensive SEO plan for high search engine rankings and organic traffic.</li>`;
                recommendationTextForForm += `- SEO Strategy: Comprehensive for high rankings\n`;
            } else if (collectedTags.has("seo-important")) {
                solutionHtml += `<li><i class="fas fa-search"></i> <strong>SEO Focus:</strong> Foundational SEO best practices for good visibility.</li>`;
                recommendationTextForForm += `- SEO Focus: Foundational for good visibility\n`;
            } else {
                solutionHtml += `<li><i class="fas fa-eye-slash"></i> <strong>SEO Focus:</strong> Basic visibility, less emphasis on aggressive ranking.</li>`;
                recommendationTextForForm += `- SEO Focus: Basic visibility\n`;
            }

            if (collectedTags.has("custom-development") || collectedTags.has("advanced-features")) {
                solutionHtml += `<li><i class="fas fa-cogs"></i> <strong>Advanced Features:</strong> Custom development for interactive elements, user accounts, or specific tools.</li>`;
                recommendationTextForForm += `- Advanced Features: Custom interactive elements/tools\n`;
            }

            if (collectedTags.has("payment-gateway")) {
                solutionHtml += `<li><i class="fas fa-credit-card"></i> <strong>Payment Integration:</strong> Secure payment gateway setup for online transactions.</li>`;
                recommendationTextForForm += `- Payment Integration: Secure gateway\n`;
            } else if (collectedTags.has("basic-payments")) {
                solutionHtml += `<li><i class="fas fa-link"></i> <strong>Basic Payment Links:</strong> Simple links for external payment processing.</li>`;
                recommendationTextForForm += `- Payment Integration: Basic payment links\n`;
            }

            // Budget & Timeline
            let budgetRange = "A tailored budget based on your specific needs.";
            if (collectedTags.has("budget-basic")) {
                budgetRange = "Our Basic Website Package (Under ₹10,000)";
            } else if (collectedTags.has("budget-standard")) {
                budgetRange = "Our Standard Business Website Package (₹10,000 - ₹25,000)";
            } else if (collectedTags.has("budget-advanced")) {
                budgetRange = "Our Advanced Solution Package (₹25,000 - ₹50,000)";
            } else if (collectedTags.has("budget-premium")) {
                budgetRange = "Our Premium / Custom Application Solution (₹50,000+)";
            }
            solutionHtml += `<li><i class="fas fa-money-bill-wave"></i> <strong>Estimated Budget Range:</strong> ${budgetRange}</li>`;
            recommendationTextForForm += `- Estimated Budget Range: ${budgetRange}\n`;


            let timeline = "A flexible timeline for thorough development.";
            if (collectedTags.has("timeline-urgent")) {
                timeline = "An expedited launch (1-2 months) for quick market entry.";
            } else if (collectedTags.has("timeline-standard")) {
                timeline = "A standard development timeline (2-4 months).";
            }
            solutionHtml += `<li><i class="fas fa-clock"></i> <strong>Project Timeline:</strong> ${timeline}</li>`;
            recommendationTextForForm += `- Project Timeline: ${timeline}\n`;

            solutionHtml += '</ul>';
            solutionContent.innerHTML = solutionHtml;
            currentRecommendationSummary = recommendationTextForForm; // Store for the form
        }

        // Event Listeners for quiz navigation
        startQuizButton.addEventListener('click', startQuiz);
        nextButton.addEventListener('click', nextQuestion);
        prevButton.addEventListener('click', prevQuestion);
        submitButton.addEventListener('click', generateSolution); // This will be called when 'Next' is clicked on the last question
        restartButton.addEventListener('click', startQuiz);

        // Event Listeners for Contact Modal
        openContactModalBtn.addEventListener('click', () => {
            contactModalOverlay.classList.add('active');
            // Pre-fill the message with the generated recommendation
            modalMessageTextarea.value = currentRecommendationSummary;
            hiddenRecommendationInput.value = currentRecommendationSummary; // Also for hidden field
            quizContactForm.reset(); // Reset other fields
            contactSuccessMessage.style.display = 'none';
            contactErrorMessage.style.display = 'none';
            quizContactForm.style.display = 'block'; // Ensure form is visible
        });

        closeContactModalBtn.addEventListener('click', () => {
            contactModalOverlay.classList.remove('active');
        });

        contactModalOverlay.addEventListener('click', (event) => {
            if (event.target === contactModalOverlay) {
                contactModalOverlay.classList.remove('active');
            }
        });

        // Handle Formspree submission for the contact modal
        quizContactForm.addEventListener('submit', async function(event) {
            event.preventDefault(); // Prevent default form submission

            const formData = new FormData(quizContactForm);

            try {
                const response = await fetch(quizContactForm.action, {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'Accept': 'application/json'
                    }
                });

                if (response.ok) {
                    quizContactForm.style.display = 'none'; // Hide the form
                    contactSuccessMessage.style.display = 'block'; // Show success message
                    contactErrorMessage.style.display = 'none';
                } else {
                    const errorData = await response.json();
                    console.error('Formspree submission error:', errorData);
                    contactErrorMessage.textContent = 'Submission failed. Please try again later.';
                    contactErrorMessage.style.display = 'block';
                    contactSuccessMessage.style.display = 'none';
                }
            } catch (error) {
                console.error('Network error during form submission:', error);
                contactErrorMessage.textContent = 'A network error occurred. Please check your internet connection and try again.';
                contactErrorMessage.style.display = 'block';
                contactSuccessMessage.style.display = 'none';
            }
        });


        // Initial display when the page loads (hidden until start button is clicked)
        window.onload = function() {
            // No need to call displayQuestion here, as startQuiz handles initial setup.
            // The initial state is the introduction and start button.
        };

    </script>
</body>
</html>
